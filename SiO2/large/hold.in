# Script to measure normal forces on the surface of the slab?
include "system.in.init"
read_restart ${filename}
include "system.in.settings"

# -----------Freeze the "bottom" of the slab ----------------
fix freezeID bottomAtomsID setforce 0 0 0
velocity bottomAtomsID set 0 0 0



variable N equal 100
variable T equal 293

neighbor	0.3 bin
neigh_modify	delay 10

thermo		1000
timestep	0.002

#restart 5000 restartFiles/hold*.restart

fix nvt all nvt temp ${T} ${T} 1.0

compute chunkID all chunk/atom bin/2d x 0 7.12 y 0 7.12

#compute stressID all stress/atom NULL
#fix fixChunkID all ave/chunk  100 10 1000 chunkID c_stressID[3] file stress50000.txt

label sampleForceLoop
variable i loop 10
    fix nvt all nvt temp ${T} ${T} 1.0
    run ${N}
    compute computeID slabGroup group/group/atom sphereGroup pair yes
    fix fixComputeID slabGroup ave/chunk 1 1 1 chunkID c_computeID[2] c_computeID[3] c_computeID[4] file forces${i}.txt #ave running
    run 0
    uncompute computeID
    unfix fixComputeID
    unfix nvt
next i
jump SELF sampleForceLoop



