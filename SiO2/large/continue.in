include "system.in.init"

read_restart ${filename}

variable N equal 1000
variable T equal 500
variable compressionLength equal 5

include "system.in.settings"

#Freeze the "bottom" of the slab
fix freezeID bottomAtomsID setforce 0 0 0
velocity bottomAtomsID set 0 0 0

restart 500 restartFiles/squeeze*.restart
neighbor	0.3 bin
neigh_modify	delay 10

thermo		100
timestep	0.002

dump myDump slabGroup atom 100 dumpFiles/SiO2_*.dump

#Move the top z-boundary downwards
fix deform all deform 1 z delta 0 -${compressionLength} remap x

fix nvt all nvt temp ${T} ${T} 1.0
run ${N}
